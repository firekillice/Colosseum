<!DOCTYPE html>
<html lang="en">
    <head>
        <style>
            #stage {
            width: 480px;
            height: 320px;
            position: relative;
            border: 2px solid black
            }
            canvas { position: absolute; }
            #ui-layer { z-index: 3 }
            #game-layer { z-index: 2 }
            #background-layer { z-index: 1 }
        </style>
        
     
    </head>

    <body>
        <div id="stage">
            <canvas id="ui-layer" width="1024" height="320"></canvas>
            <canvas id="game-layer" width="480" height="320"></canvas>
            <canvas id="background-layer" width="480" height="320"></canvas>
        </div>
        <script>
            var c = document.getElementById('ui-layer');
            var ctx = c.getContext('2d');

            var animal = {
                frame: 0,
                total: 10,
                width: 100,
                height: 100,
                current: 0,
                src: "./assets/layer/ghost-sequence.png",
                img: null,
                draw: function() {
                    if (this.img == null) {
                        this.img = new Image(this.width, this.height)
                        this.img.src = this.src
                    }
                    ctx.clearRect(0, 0, c.width, c.height);
                    //ctx.drawImage(this.img, 0, 0);
                    this.current++;
                    if (this.current >= this.img.naturalWidth) {
                        this.current = 0;
                    }
                    ctx.drawImage(this.img, 0,0, c.width, c.height, this.current, 0, c.width, c.height);
                },
                next:function() {
                    this.frame++;
                    if (this.frame >= this.total) {
                        this.frame = 0;
                    }
                }
            };

            function animal_run() {
                animal.next()
                animal.draw()
                requestAnimationFrame(animal_run);
            }
            requestAnimationFrame(animal_run);

        </script>
    </body>
</html>